<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SFMC Lesson 4: Email Studio & Content Creation - Interactive Q&A</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(220, 53, 69, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header .subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
            font-weight: 500;
        }

        .progress-container {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 3px solid #dc3545;
        }

        .progress-bar {
            background: #e9ecef;
            height: 12px;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        .progress-fill {
            background: linear-gradient(90deg, #dc3545, #c82333);
            height: 100%;
            border-radius: 6px;
            transition: width 0.5s ease;
            width: 2.5%;
        }

        .progress-text {
            text-align: center;
            font-weight: 600;
            color: #dc3545;
            font-size: 1.1rem;
        }

        .quiz-container {
            padding: 40px;
        }

        .question-card {
            background: #fff;
            border: 2px solid #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .question-card.answered-correct {
            border-color: #28a745;
            background: #f8fff9;
        }

        .question-card.answered-incorrect {
            border-color: #dc3545;
            background: #fff8f8;
        }

        .question-number {
            color: #dc3545;
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }

        .question-text {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .options {
            list-style: none;
        }

        .option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px 20px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .option:hover {
            background: #e9ecef;
            border-color: #dc3545;
            transform: translateX(5px);
        }

        .option.selected {
            background: #dc3545;
            color: white;
            border-color: #c82333;
        }

        .option.correct {
            background: #28a745;
            color: white;
            border-color: #1e7e34;
        }

        .option.incorrect {
            background: #dc3545;
            color: white;
            border-color: #c82333;
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .explanation {
            background: #e8f4fd;
            border-left: 4px solid #dc3545;
            padding: 20px;
            margin-top: 20px;
            border-radius: 0 10px 10px 0;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .explanation h4 {
            color: #dc3545;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .explanation p {
            color: #2c3e50;
            line-height: 1.6;
        }

        .controls {
            background: #f8f9fa;
            padding: 25px 40px;
            text-align: center;
            border-top: 2px solid #e9ecef;
        }

        .btn {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0 10px;
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(220, 53, 69, 0.4);
        }

        .btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .score-container {
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
            padding: 30px;
            text-align: center;
            display: none;
        }

        .score-container.show {
            display: block;
        }

        .score-title {
            font-size: 2.5rem;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .score-details {
            font-size: 1.3rem;
            margin-bottom: 25px;
        }

        .score-percentage {
            font-size: 3rem;
            font-weight: 800;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .topic-breakdown {
            background: white;
            color: #333;
            padding: 30px;
            margin: 20px;
            border-radius: 15px;
            text-align: left;
        }

        .topic-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .topic-item:last-child {
            border-bottom: none;
        }

        .topic-name {
            font-weight: 600;
            color: #dc3545;
        }

        .topic-score {
            font-weight: 700;
            color: #2c3e50;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .quiz-container {
                padding: 20px;
            }

            .question-card {
                padding: 20px;
            }

            .controls {
                padding: 20px;
            }

            .btn {
                display: block;
                width: 100%;
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚úâÔ∏è SFMC Email Specialist Certification</h1>
            <div class="subtitle">Lesson 4: Email Studio & Content Creation (23-28% of Exam)</div>
        </div>

        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-text" id="progress-text">Question 1 of 40</div>
        </div>

        <div class="quiz-container" id="quiz-container">
            <!-- Questions will be populated here -->
        </div>

        <div class="controls">
            <button class="btn" id="prev-btn" onclick="previousQuestion()" disabled>Previous</button>
            <button class="btn" id="next-btn" onclick="nextQuestion()" disabled>Next</button>
            <button class="btn" id="finish-btn" onclick="finishQuiz()" style="display: none;">Finish Quiz</button>
            <button class="btn" id="restart-btn" onclick="restartQuiz()" style="display: none;">Restart Quiz</button>
        </div>

        <div class="score-container" id="score-container">
            <div class="score-title">üèÜ Quiz Complete!</div>
            <div class="score-percentage" id="final-percentage"></div>
            <div class="score-details" id="score-details"></div>
            <div class="topic-breakdown" id="topic-breakdown"></div>
        </div>
    </div>

    <script>
        const questions = [
            {
                question: "Northern Trail Outfitters needs to create a responsive email template that displays a 3-column product layout on desktop, 2-column on tablet, and single-column on mobile devices. They're experiencing rendering issues in Outlook and Gmail mobile apps. What HTML/CSS approach would ensure consistent responsive behavior across all major email clients?",
                options: [
                    "Use CSS flexbox with media queries for responsive layout control",
                    "Implement table-based responsive design with media queries and conditional MSO styling for Outlook compatibility",
                    "Use CSS Grid layout for responsive column management across devices",
                    "Create separate email templates for each device type and target accordingly"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Table-based responsive design with media queries provides the most reliable cross-client compatibility, especially for Outlook which uses Word's rendering engine. Conditional MSO styling ensures proper Outlook display while media queries handle responsive behavior in modern clients. Flexbox (A) has limited email client support. CSS Grid (C) isn't supported in email clients. Separate templates (D) increase complexity and don't address client-specific rendering issues."
            },
            {
                question: "NTO's email templates need to support dark mode in iOS Mail, Gmail, and Outlook mobile while maintaining brand color consistency. They're using custom brand colors that don't adapt well to dark backgrounds. What CSS strategy would best handle dark mode compatibility while preserving brand identity?",
                options: [
                    "Use only web-safe colors to ensure consistency across light and dark modes",
                    "Implement CSS media queries with prefers-color-scheme and custom CSS properties for adaptive brand colors",
                    "Ignore dark mode compatibility and design only for light mode",
                    "Use transparent backgrounds for all email elements to adapt automatically"
                ],
                correct: 1,
                explanation: "Correct Answer: B. CSS media queries with prefers-color-scheme detect dark mode preferences, while custom CSS properties (CSS variables) allow defining alternative brand colors that maintain brand consistency in dark environments. This approach ensures professional appearance across all modes. Web-safe colors (A) limit brand expression. Ignoring dark mode (C) creates poor user experience. Transparent backgrounds (D) can cause readability issues and don't address brand color adaptation."
            },
            {
                question: "A complex NTO promotional email contains interactive elements including image carousels, expandable content sections, and hover effects for desktop users. These elements need to degrade gracefully for email clients that don't support CSS animations. What development approach ensures functionality across all email clients?",
                options: [
                    "Use progressive enhancement with fallback static content for all interactive elements",
                    "Implement JavaScript-based interactions for full functionality",
                    "Use only CSS3 animations without fallbacks to maintain modern appearance",
                    "Create interactive content using AMP for Email in all campaigns"
                ],
                correct: 0,
                explanation: "Correct Answer: A. Progressive enhancement ensures all users receive functional content while enhanced clients get improved experiences. Fallback static content provides core functionality when advanced features aren't supported. JavaScript (B) isn't supported in most email clients. CSS3 without fallbacks (C) breaks functionality in older clients. AMP for Email (D) has limited client support and isn't suitable for all campaigns."
            },
            {
                question: "NTO needs to implement consistent typography across their email campaigns that renders properly in Outlook 2016/2019, Gmail, Apple Mail, and mobile clients. They want to use their brand font (custom web font) when available but ensure readable fallbacks. What font strategy provides the best brand consistency with universal compatibility?",
                options: [
                    "Use web fonts with @import CSS for all email clients",
                    "Implement web font stacks with proper fallbacks using @font-face with VML fallbacks for Outlook",
                    "Use only system fonts to ensure consistency across all clients",
                    "Create separate versions with different fonts for different email clients"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Web font stacks with proper fallbacks ensure brand fonts display when supported while providing readable alternatives. VML fallbacks specifically address Outlook limitations. This approach maximizes brand consistency while ensuring readability. @import CSS (A) isn't reliably supported in email. System fonts only (C) limit brand expression. Separate versions (D) increase complexity without solving fundamental compatibility issues."
            },
            {
                question: "An NTO email template includes product images that need to display at different sizes across devices: full width on mobile, 50% width on tablet, and fixed 200px width on desktop. The images also need alt text and should be optimized for high-DPI screens. What image implementation strategy provides optimal display across all scenarios?",
                options: [
                    "Use CSS background images with media queries for responsive sizing",
                    "Implement responsive img tags with srcset, sizes attributes, and CSS media queries for device-specific styling",
                    "Use fixed-size images and let email clients handle scaling automatically",
                    "Create separate image files for each device size and use conditional CSS"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Responsive img tags with srcset provide high-DPI support, sizes attributes optimize bandwidth usage, and media queries control device-specific styling. This approach ensures accessibility with alt text and optimal image quality. Background images (A) don't support alt text and have limited client support. Fixed sizing (C) doesn't optimize for different screen sizes. Separate files (D) increase complexity and don't address DPI optimization."
            },
            {
                question: "NTO wants to implement email template testing across 15+ email clients including Outlook 2007-2019, Gmail (web and mobile), Apple Mail, and various mobile clients. They need automated testing that catches rendering issues before campaigns go live. What testing strategy provides comprehensive email client coverage with efficient workflow?",
                options: [
                    "Manual testing on available devices and email clients in-house",
                    "Use email testing services with automated screenshot testing across multiple clients and devices",
                    "Test only in the three most popular email clients to save time",
                    "Rely on SFMC's preview functionality for all testing needs"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Email testing services provide comprehensive client coverage with automated screenshot comparisons, identifying rendering issues across all major clients efficiently. This approach scales testing beyond in-house capabilities and catches client-specific problems. Manual testing (A) is time-intensive and may miss obscure client issues. Limited testing (C) risks issues in untested clients. SFMC preview (D) doesn't replace actual client testing."
            },
            {
                question: "A complex NTO email campaign includes conditional content blocks that show different layouts based on subscriber data (VIP status, geographic location, purchase history). The template needs to maintain responsive behavior while dynamically adjusting content structure. What architecture approach handles both dynamic content and responsive design effectively?",
                options: [
                    "Create separate email templates for each content variation",
                    "Use AMPscript with responsive table structures and conditional CSS classes",
                    "Implement JavaScript-based content switching with responsive CSS",
                    "Use external API calls during send time to determine content layout"
                ],
                correct: 1,
                explanation: "Correct Answer: B. AMPscript enables server-side conditional logic while responsive table structures maintain cross-client compatibility. Conditional CSS classes adjust styling based on content variations. This approach combines dynamic content with reliable responsive behavior. Separate templates (A) multiply maintenance complexity. JavaScript (C) isn't supported in email clients. API calls during send (D) impact performance and reliability."
            },
            {
                question: "NTO needs to display personalized product recommendations based on a subscriber's purchase history stored in a separate Data Extension. The recommendation logic needs to exclude out-of-stock items, consider seasonal availability, and display up to 4 products with fallback content if insufficient products are available. What AMPscript approach provides this complex recommendation logic?",
                options: [
                    "Use simple Lookup functions to retrieve the first available products",
                    "Implement LookupRows with conditional logic, loops, and fallback content management using AMPscript variables and functions",
                    "Create a separate email template for each possible recommendation scenario",
                    "Use basic personalization strings without complex logic"
                ],
                correct: 1,
                explanation: "Correct Answer: B. LookupRows enables retrieval of multiple matching records, while conditional logic filters by availability and season. Loops manage the recommendation count, and variables handle fallback scenarios. This comprehensive approach provides sophisticated personalization within email templates. Simple Lookup (A) lacks the complexity needed for advanced recommendations. Separate templates (C) don't scale with dynamic requirements. Basic personalization (D) doesn't meet the sophisticated requirements."
            },
            {
                question: "An NTO abandoned cart email needs to dynamically calculate cart total, apply personalized discount codes based on customer tier, show time-sensitive urgency messaging, and handle currency formatting for international customers. The cart data is stored across multiple Data Extensions with complex relationships. What AMPscript architecture handles this multi-layered personalization?",
                options: [
                    "Use static content blocks with basic personalization strings",
                    "Implement nested LookupRows with mathematical functions, conditional discounting logic, date arithmetic, and currency formatting functions",
                    "Create separate Data Extensions with pre-calculated values for each scenario",
                    "Use external API calls to calculate personalized content during send"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Nested LookupRows retrieve related cart and customer data, mathematical functions calculate totals and discounts, date arithmetic manages urgency timing, and currency formatting ensures proper international display. This comprehensive AMPscript approach handles complex business logic efficiently. Static content (A) doesn't provide needed personalization. Pre-calculated extensions (C) don't handle real-time scenarios. API calls (D) impact send performance and introduce dependencies."
            },
            {
                question: "NTO wants to implement advanced email personalization using machine learning insights stored in Einstein Analytics data. The personalization includes predicted next purchase category, likelihood scores, and recommended engagement timing. The data updates daily and needs error handling for missing predictions. What AMPscript strategy integrates ML insights with robust error handling?",
                options: [
                    "Use simple AMPscript Lookup with basic error handling",
                    "Implement comprehensive data validation, conditional content blocks based on prediction confidence, and graceful degradation with fallback personalization",
                    "Ignore error handling and use prediction data directly",
                    "Create manual segments based on prediction data instead of dynamic personalization"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Comprehensive data validation ensures prediction data quality, conditional blocks provide confidence-based content selection, and graceful degradation maintains email functionality when predictions aren't available. This approach maximizes ML value while ensuring reliable email delivery. Simple lookup (A) lacks sophistication for ML integration. Ignoring errors (C) risks broken emails. Manual segments (D) don't provide dynamic personalization benefits."
            },
            {
                question: "A complex NTO loyalty program email needs to display member tier status, points balances, tier progress bars, upcoming expiration dates, and personalized tier benefits. The loyalty data spans multiple Data Extensions and includes complex tier calculation rules. What AMPscript approach manages this multi-faceted loyalty personalization?",
                options: [
                    "Use separate email templates for each loyalty tier",
                    "Create pre-calculated loyalty summaries in Data Extensions and use simple personalization",
                    "Implement complex AMPscript with mathematical calculations, progress bar logic, date functions, and multi-table data integration",
                    "Use static loyalty information without personalization"
                ],
                correct: 2,
                explanation: "Correct Answer: C. Complex AMPscript with mathematical calculations handles tier progress, date functions manage expiration logic, and multi-table integration provides comprehensive loyalty data. This approach delivers sophisticated personalization while maintaining email template efficiency. Separate templates (A) multiply maintenance complexity. Pre-calculated summaries (B) may not reflect real-time data changes. Static information (D) loses personalization value."
            },
            {
                question: "NTO needs to implement conditional content that shows different promotional offers based on subscriber's geographic location, weather conditions, and local inventory levels. The logic needs to handle multiple decision trees and provide fallback offers when specific conditions aren't met. What AMPscript structure provides this complex conditional logic?",
                options: [
                    "Use simple IF statements for basic conditional content",
                    "Create nested conditional statements with multiple lookup functions, geographic data integration, and sophisticated fallback logic using AMPscript variables and functions",
                    "Use external services to determine content and import results",
                    "Create separate campaigns for each geographic and weather combination"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Nested conditional statements handle complex decision trees, multiple lookups integrate various data sources, and sophisticated fallback logic ensures appropriate content delivery regardless of data availability. AMPscript variables manage state throughout the decision process. Simple IF statements (A) lack necessary complexity. External services (C) introduce dependencies and latency. Separate campaigns (D) don't scale with multiple variables."
            },
            {
                question: "An NTO email template needs to handle data formatting inconsistencies from multiple source systems: dates in different formats, phone numbers with various formatting, and names with inconsistent capitalization. The template must standardize these formats for professional presentation. What AMPscript functions provide comprehensive data standardization?",
                options: [
                    "Use data as-is from source systems without modification",
                    "Implement string manipulation functions (ProperCase, Replace, RegexMatch), date formatting functions (FormatDate), and standardization logic for consistent data presentation",
                    "Create separate import processes to standardize data before email creation",
                    "Use only fields that don't require formatting adjustments"
                ],
                correct: 1,
                explanation: "Correct Answer: B. String manipulation functions standardize text presentation, date formatting functions ensure consistent date display, and standardization logic handles various input formats. This approach provides professional email presentation regardless of source system formatting. Using data as-is (A) creates unprofessional appearance. Separate processes (B) add complexity and may not handle all scenarios. Limiting fields (D) reduces personalization capabilities."
            },
            {
                question: "NTO wants to implement advanced error handling in their AMPscript to manage scenarios where Data Extensions are temporarily unavailable, lookup failures occur, or data corruption is detected. The emails must still send with appropriate fallback content. What comprehensive error handling strategy ensures reliable email delivery?",
                options: [
                    "Use try-catch blocks to handle all potential errors",
                    "Implement error detection with conditional logic, variable validation, data existence checks, and multi-level fallback content strategies",
                    "Let emails fail when errors occur to maintain data accuracy",
                    "Use only data sources that are guaranteed to be available"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Error detection with conditional logic identifies issues, variable validation ensures data quality, existence checks prevent lookup failures, and multi-level fallbacks provide appropriate content alternatives. This comprehensive approach ensures reliable email delivery with graceful degradation. Try-catch blocks (A) aren't available in AMPscript. Allowing failures (C) impacts customer experience. Limiting data sources (D) reduces personalization capabilities."
            },
            {
                question: "NTO wants to test multiple email elements simultaneously: subject line variations (3 options), sender name variations (2 options), and call-to-action button colors (2 options). They have 120,000 subscribers and need statistical significance with 95% confidence. What multivariate testing approach would provide the most actionable insights?",
                options: [
                    "Test all combinations simultaneously (3x2x2 = 12 variations) with equal distribution",
                    "Run sequential A/B tests for each element to isolate variables and ensure statistical significance per test",
                    "Test only the most important element (subject line) to maximize statistical power",
                    "Use split testing with random element combinations"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Sequential A/B tests isolate variable effects and ensure adequate sample sizes for statistical significance. This approach provides clear insights into each element's impact and enables optimization based on definitive results. Simultaneous testing (A) reduces sample size per variation below significance thresholds. Single element testing (C) misses optimization opportunities. Random combinations (D) don't provide systematic insights."
            },
            {
                question: "An NTO email campaign needs to test send time optimization across different subscriber segments (B2B vs B2C customers) with varying time zones and engagement patterns. They want to identify optimal send times for each segment while maintaining campaign coherence. What testing architecture provides segment-specific timing insights?",
                options: [
                    "Send all emails at the same time regardless of segment or time zone",
                    "Implement segment-specific A/B testing with time zone normalization and engagement pattern analysis",
                    "Use Einstein Send Time Optimization without additional testing",
                    "Test send times only for the largest subscriber segment"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Segment-specific A/B testing recognizes that optimal send times vary by audience type and behavior patterns. Time zone normalization ensures fair comparison while engagement analysis provides actionable insights for each segment. Universal send time (A) ignores audience differences. Einstein STO (C) provides automation but not testing insights. Single segment testing (D) doesn't optimize for all audiences."
            },
            {
                question: "NTO needs to test email content length and format: short vs. long-form content, text-heavy vs. image-rich layouts, and single vs. multiple CTAs. The test needs to measure not just opens and clicks, but also downstream conversions and revenue attribution. What comprehensive testing strategy provides business-impact insights?",
                options: [
                    "Test only email engagement metrics (opens, clicks) for faster results",
                    "Implement full-funnel A/B testing with conversion tracking, revenue attribution, and customer lifetime value analysis",
                    "Focus testing on the most visually impactful changes only",
                    "Use qualitative feedback instead of quantitative testing"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Full-funnel testing measures complete business impact beyond email engagement, including conversion rates and revenue attribution. This comprehensive approach provides true business value insights rather than just email metrics. Email-only metrics (A) miss business impact. Visual-only focus (C) ignores content effectiveness. Qualitative feedback (D) doesn't provide statistical validation."
            },
            {
                question: "A seasonal NTO campaign needs rapid A/B testing with quick statistical significance determination due to limited campaign window. They have 200,000 subscribers and need results within 24-48 hours. What testing methodology provides reliable results within tight timeframes?",
                options: [
                    "Use small sample sizes to get faster results",
                    "Implement sequential probability ratio testing (SPRT) with early stopping rules for rapid significance detection",
                    "Skip statistical significance testing and use directional results only",
                    "Test during low-engagement periods to accelerate data collection"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Sequential probability ratio testing enables early stopping when statistical significance is achieved, reducing time to actionable results while maintaining statistical rigor. This approach optimizes for speed without sacrificing validity. Small samples (A) reduce accuracy and reliability. Skipping significance (C) risks making decisions on random variation. Low-engagement testing (D) may not represent campaign performance."
            },
            {
                question: "NTO wants to test personalization effectiveness across different customer segments: new customers, repeat buyers, and VIP members. Each segment may respond differently to personalization levels (basic name, purchase history, predictive recommendations). What testing approach captures segment-specific personalization impact?",
                options: [
                    "Test personalization with all segments combined for overall results",
                    "Implement segment-stratified A/B testing with personalization levels tailored to segment characteristics and engagement patterns",
                    "Use the same personalization approach for all segments",
                    "Test only with the most engaged customer segment"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Segment-stratified testing recognizes that personalization effectiveness varies by customer relationship and behavior patterns. Tailored personalization levels ensure relevant testing while segment-specific analysis provides actionable insights for each group. Combined testing (A) masks segment differences. Universal approach (C) doesn't optimize for segment preferences. Single-segment testing (D) doesn't provide comprehensive insights."
            },
            {
                question: "An NTO loyalty program email campaign needs to test reward presentation formats: points balance displays, tier progress visualization, and benefit highlight methods. The tests must account for different loyalty levels and measure both immediate engagement and long-term program participation. What testing framework addresses these complex loyalty dynamics?",
                options: [
                    "Focus testing on visual elements only without considering loyalty levels",
                    "Design loyalty-aware A/B testing with tier-specific content variations and longitudinal engagement tracking",
                    "Test with new loyalty members only to isolate variables",
                    "Use standard email testing without loyalty-specific considerations"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Loyalty-aware testing recognizes that different loyalty levels respond to different motivational elements. Tier-specific variations ensure relevant content while longitudinal tracking measures program engagement beyond immediate email metrics. Visual-only testing (A) misses motivational dynamics. New-member-only testing (C) doesn't address diverse loyalty behaviors. Standard testing (D) ignores loyalty program context."
            },
            {
                question: "NTO needs to create a modular email system supporting 50+ email types across 5 brands with shared components (headers, footers, product blocks) while maintaining brand-specific styling and content governance. What Content Builder architecture provides maximum reusability with brand control?",
                options: [
                    "Create separate templates for each brand and email type combination",
                    "Implement a component library system with shared base templates, brand-specific style blocks, and modular content components",
                    "Use one master template with conditional logic for all variations",
                    "Create templates for each email type without considering brand differences"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Component library systems enable shared functionality while brand-specific style blocks maintain visual identity. Modular components provide flexibility and reusability across email types and brands. This approach scales efficiently while maintaining governance. Separate templates (A) multiply maintenance complexity. Master template (C) becomes unwieldy with extensive conditional logic. Type-only templates (D) don't address brand requirements."
            },
            {
                question: "An NTO content team needs approval workflows for different content types: promotional emails requiring legal review, transactional emails needing technical validation, and newsletter content requiring editorial approval. What Content Builder governance strategy manages these varied approval requirements?",
                options: [
                    "Use a single approval process for all email content",
                    "Implement content-type-specific approval workflows with role-based permissions and automated routing based on content classification",
                    "Require manual approval requests outside of SFMC for all content",
                    "Skip formal approval processes to speed up campaign creation"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Content-type-specific workflows ensure appropriate reviews while role-based permissions control access. Automated routing based on classification streamlines processes while maintaining compliance. This approach balances efficiency with governance requirements. Single process (A) doesn't match varied requirements. External approval (C) creates inefficiency and tracking difficulties. No approval (D) risks compliance and brand issues."
            },
            {
                question: "NTO wants to implement dynamic content blocks that automatically populate with current promotions, inventory levels, and personalized recommendations while maintaining template structure across campaigns. What Content Builder approach provides dynamic content with template consistency?",
                options: [
                    "Hard-code all content directly into email templates",
                    "Create data-driven content blocks using AMPscript with template inheritance and modular architecture",
                    "Use external content management systems for all dynamic content",
                    "Manually update content blocks for each campaign"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Data-driven content blocks with AMPscript enable automatic content population while template inheritance maintains consistent structure. Modular architecture provides flexibility and reusability. This approach automates content while preserving design consistency. Hard-coding (A) prevents dynamic updates. External systems (C) add complexity and integration challenges. Manual updates (D) aren't scalable and introduce errors."
            },
            {
                question: "A complex NTO email program requires content versioning for international markets with different languages, currencies, regulatory requirements, and cultural preferences. The system needs to maintain template structure while adapting content appropriately. What Content Builder strategy handles international content variation efficiently?",
                options: [
                    "Create completely separate templates for each international market",
                    "Implement template inheritance with localization-aware content blocks and cultural adaptation logic",
                    "Use automatic translation services for all international content",
                    "Maintain English-only templates and let recipients translate as needed"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Template inheritance maintains structural consistency while localization-aware blocks adapt content appropriately. Cultural adaptation logic ensures relevance beyond language translation. This approach scales internationally while maintaining efficiency. Separate templates (A) multiply maintenance overhead. Automatic translation (C) may not handle cultural nuances. English-only (D) provides poor user experience for international customers."
            },
            {
                question: "NTO needs to implement content block libraries that multiple team members can access and modify while preventing version conflicts and maintaining content quality. They need change tracking and rollback capabilities for content governance. What Content Builder architecture provides collaborative content management with version control?",
                options: [
                    "Allow unrestricted access to all content blocks for maximum flexibility",
                    "Implement structured content libraries with check-out/check-in processes, change tracking, and role-based modification permissions",
                    "Create separate content libraries for each team member to avoid conflicts",
                    "Use external document management systems for all content collaboration"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Structured libraries with check-out/check-in prevent conflicts while change tracking provides audit trails. Role-based permissions ensure appropriate access while maintaining content quality. This approach enables collaboration while protecting content integrity. Unrestricted access (A) causes version conflicts and quality issues. Separate libraries (C) prevent collaboration and create consistency issues. External systems (D) complicate integration and workflow."
            },
            {
                question: "An NTO campaign optimization initiative needs to track content block performance across different email campaigns to identify high-performing elements and optimize template libraries. What Content Builder strategy provides content performance insights for optimization?",
                options: [
                    "Track email-level metrics only without content block granularity",
                    "Implement content block tracking with performance attribution, A/B testing integration, and optimization recommendations",
                    "Use external analytics platforms for all content performance analysis",
                    "Focus on design aesthetics rather than performance metrics"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Content block tracking with performance attribution identifies which elements drive engagement. A/B testing integration enables systematic optimization while recommendation engines suggest improvements. This approach provides actionable insights for content optimization. Email-only metrics (A) don't identify specific performing elements. External platforms (C) may not integrate well with Content Builder workflows. Design focus (D) ignores performance optimization opportunities."
            },
            {
                question: "NTO needs to implement transactional email triggers for order confirmations, shipping notifications, and delivery confirmations that must fire within seconds of triggering events. The system needs to handle 15,000 daily transactions with guaranteed delivery and real-time personalization. What architecture ensures real-time transactional email delivery?",
                options: [
                    "Use scheduled batch processing to send all transactional emails hourly",
                    "Implement API-triggered sends with real-time data integration and priority queue processing",
                    "Use Journey Builder automation for all transactional communications",
                    "Create manual triggered send processes for quality control"
                ],
                correct: 1,
                explanation: "Correct Answer: B. API-triggered sends provide immediate response to triggering events while real-time data integration ensures current information. Priority queue processing guarantees delivery performance for transactional requirements. This architecture meets real-time requirements with reliable delivery. Batch processing (A) doesn't meet real-time requirements. Journey Builder (C) may add latency for simple transactional needs. Manual processes (D) don't scale with high volumes."
            },
            {
                question: "An NTO e-commerce platform needs transactional emails that pull real-time inventory levels, calculate personalized pricing with current promotions, and include dynamic shipping information based on customer location and selected delivery methods. What transactional architecture handles complex real-time data integration?",
                options: [
                    "Use static transactional templates with basic order information",
                    "Implement API-driven transactional sends with real-time data calls and dynamic content generation",
                    "Pre-calculate all possible scenarios and store in Data Extensions",
                    "Send transactional emails without personalization for faster delivery"
                ],
                correct: 1,
                explanation: "Correct Answer: B. API-driven sends can make real-time data calls for current inventory, pricing, and shipping information while dynamic content generation personalizes each message appropriately. This approach provides comprehensive personalization with transactional reliability. Static templates (A) don't meet complex requirements. Pre-calculation (C) isn't feasible for all scenarios. No personalization (D) reduces customer experience and value."
            },
            {
                question: "NTO's transactional email system needs to handle failure scenarios: API timeouts, data source unavailability, and delivery failures, while ensuring customers receive critical transaction information. What fault tolerance strategy ensures reliable transactional communication?",
                options: [
                    "Accept that some transactional emails may fail during system issues",
                    "Implement comprehensive failure handling with retry logic, fallback content, alternative delivery methods, and monitoring alerts",
                    "Use only the most reliable data sources even if information is limited",
                    "Queue all transactional emails during any system issues"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Comprehensive failure handling includes retry logic for temporary issues, fallback content for data unavailability, alternative delivery methods for critical communications, and monitoring for proactive issue resolution. This approach ensures reliable transactional communication. Accepting failures (A) damages customer trust. Limited data sources (C) reduce communication value. Queuing during issues (D) defeats transactional timing requirements."
            },
            {
                question: "A complex NTO subscription service needs transactional emails for account changes, billing events, service updates, and usage notifications with different urgency levels and delivery requirements. What transactional classification system manages varied communication priorities?",
                options: [
                    "Treat all transactional emails with identical priority and delivery methods",
                    "Implement priority classification with urgency-based routing, delivery method selection, and appropriate retry policies",
                    "Use random delivery timing to spread system load",
                    "Send all transactional emails at scheduled times regardless of urgency"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Priority classification recognizes that different transactional types have different urgency requirements. Urgency-based routing ensures critical communications get priority while appropriate retry policies match business requirements. This approach optimizes both customer experience and system resources. Identical treatment (A) doesn't match business requirements. Random timing (C) ignores urgency needs. Scheduled delivery (D) defeats transactional immediacy requirements."
            },
            {
                question: "NTO needs to implement transactional email compliance with regulations requiring delivery confirmation, content archiving, and audit trails for financial communications while maintaining performance for high-volume transactions. What compliance architecture balances regulatory requirements with performance?",
                options: [
                    "Add compliance features only to marketing emails to maintain transactional performance",
                    "Implement regulatory-compliant transactional architecture with delivery tracking, automated archiving, and audit logging",
                    "Use external compliance services for all regulatory requirements",
                    "Simplify transactional emails to avoid compliance complexities"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Regulatory-compliant architecture includes necessary compliance features (delivery tracking, archiving, audit logging) while maintaining transactional performance through efficient implementation. This approach meets legal requirements without sacrificing functionality. Marketing-only compliance (A) doesn't address transactional requirements. External services (C) may introduce latency. Simplification (D) may not meet business communication needs."
            },
            {
                question: "NTO operates in 15 countries with different languages, currencies, date formats, and cultural preferences. Their email templates need to automatically adapt content, formatting, and imagery based on subscriber locale while maintaining brand consistency. What localization architecture provides comprehensive cultural adaptation?",
                options: [
                    "Use automatic translation services for all content without cultural consideration",
                    "Implement locale-aware template system with cultural content libraries, format adaptation, and regional imagery",
                    "Create separate Marketing Cloud instances for each country",
                    "Use English-only emails with manual translation attachments"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Locale-aware systems adapt beyond language to include currency formatting, date conventions, cultural imagery, and regional preferences. Cultural content libraries ensure appropriate messaging while maintaining brand consistency. This comprehensive approach provides true localization. Auto-translation (A) misses cultural nuances. Separate instances (C) increase complexity and prevent global customer views. English-only (D) provides poor international customer experience."
            },
            {
                question: "An NTO global campaign needs dynamic language selection based on subscriber preferences, geographic location, and browsing behavior, with fallback logic when preferred languages aren't available. What language selection strategy provides optimal user experience with reliable fallbacks?",
                options: [
                    "Use subscriber's country to determine language automatically",
                    "Implement preference-based language selection with intelligent fallback hierarchy using multiple data points",
                    "Always use the most common language in each region",
                    "Let subscribers manually select language for each email"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Preference-based selection honors subscriber choices while intelligent fallback hierarchy uses geographic and behavioral data when preferences aren't available. This approach maximizes personalization while ensuring all subscribers receive appropriate language content. Country-based (A) ignores personal preferences. Regional common language (C) doesn't account for individual preferences. Manual selection (D) creates friction and may not be remembered."
            },
            {
                question: "NTO's multilingual email templates need to handle text expansion challenges where translated content requires 30-50% more space than English, affecting layout and responsive design. What design strategy accommodates text expansion while maintaining visual consistency?",
                options: [
                    "Use fixed layout designs and accept text overflow in some languages",
                    "Implement flexible template architecture with expandable content areas and responsive text handling",
                    "Limit translated content to match English length requirements",
                    "Create separate responsive breakpoints for each language"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Flexible template architecture with expandable content areas accommodates text length variations while responsive text handling maintains readability across devices. This approach ensures visual consistency regardless of language requirements. Fixed layouts (A) create poor user experience with overflow. Content limitation (C) may compromise message effectiveness. Separate breakpoints (D) multiply design complexity unnecessarily."
            },
            {
                question: "A complex NTO loyalty program spans multiple countries with different point systems, redemption options, and regulatory requirements. The localization system needs to adapt not just language but entire program logic and offerings. What localization approach handles complex program variations?",
                options: [
                    "Use a single global loyalty program structure with basic language translation",
                    "Implement country-specific program logic with localized content, offers, and compliance frameworks",
                    "Create separate loyalty programs for each country without integration",
                    "Focus localization on visual elements only without changing program mechanics"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Country-specific program logic accommodates different loyalty structures, regulatory requirements, and market expectations while localized content ensures appropriate communication. This approach provides true program localization beyond language translation. Single global structure (A) ignores market differences. Separate programs (C) prevent unified customer experiences. Visual-only localization (D) doesn't address program variation needs."
            },
            {
                question: "NTO needs comprehensive email performance tracking that measures not just opens and clicks, but conversion paths, revenue attribution, customer lifetime value impact, and cross-channel engagement influenced by email campaigns. What analytics architecture provides complete email impact measurement?",
                options: [
                    "Use standard SFMC reporting for opens, clicks, and unsubscribes only",
                    "Implement comprehensive analytics with conversion tracking, revenue attribution, CLV analysis, and cross-channel impact measurement",
                    "Focus analytics on email engagement metrics without business impact",
                    "Use external analytics tools exclusively without SFMC integration"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Comprehensive analytics integrate email engagement with business outcomes through conversion tracking, revenue attribution, and customer value analysis. Cross-channel measurement shows email's role in broader customer journeys. This approach provides complete ROI visibility. Standard reporting (A) misses business impact. Engagement-only focus (C) doesn't measure value. External-only tools (D) miss integration benefits and SFMC-specific insights."
            },
            {
                question: "An NTO email program needs advanced attribution modeling to understand email's role in multi-touch customer journeys including website visits, store visits, social media interactions, and phone inquiries before purchase. What attribution strategy captures email's true contribution to conversions?",
                options: [
                    "Use last-click attribution to give email full credit for direct conversions",
                    "Implement multi-touch attribution modeling with weighted contribution analysis across all customer touchpoints",
                    "Track only email-specific conversions without considering other channels",
                    "Use first-click attribution to credit email for initial customer engagement"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Multi-touch attribution recognizes email's role within complex customer journeys while weighted contribution analysis provides appropriate credit distribution. This approach reveals email's true value in driving conversions through various touchpoint combinations. Last-click (A) ignores email's nurturing role. Email-only tracking (C) misses multi-channel reality. First-click (D) doesn't credit email's conversion influence."
            },
            {
                question: "NTO wants to implement predictive email analytics that forecast campaign performance, identify optimal send timing, predict subscriber churn risk, and recommend content optimization based on historical performance patterns. What analytics approach provides predictive insights for email optimization?",
                options: [
                    "Use historical averages to predict future performance",
                    "Implement machine learning-powered predictive analytics with pattern recognition and optimization recommendations",
                    "Rely on intuition and experience for performance predictions",
                    "Use industry benchmarks as predictive baselines"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Machine learning-powered analytics identify complex patterns in historical data while optimization recommendations provide actionable insights for improvement. This approach transforms data into predictive intelligence for email program optimization. Historical averages (A) don't capture complex patterns. Intuition (C) lacks data-driven accuracy. Industry benchmarks (D) don't reflect specific program characteristics."
            },
            {
                question: "A complex NTO email program needs real-time performance monitoring with automated alerts for deliverability issues, engagement anomalies, and conversion drops. The monitoring system needs to differentiate between normal variations and actionable problems. What monitoring architecture provides intelligent performance oversight?",
                options: [
                    "Review email performance manually on a weekly basis",
                    "Implement intelligent monitoring with anomaly detection, threshold-based alerts, and automated issue classification",
                    "Set static alerts for all performance metrics regardless of normal variations",
                    "Monitor only the most critical campaigns manually"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Intelligent monitoring with anomaly detection identifies unusual patterns while threshold-based alerts and automated classification differentiate actionable issues from normal variations. This approach provides proactive issue identification without alert fatigue. Manual weekly review (A) misses time-sensitive issues. Static alerts (C) create noise without intelligence. Manual critical-only (D) misses broader program issues."
            },
            {
                question: "NTO needs to implement a comprehensive email optimization program that includes send time optimization, content personalization, subject line testing, frequency optimization, and deliverability monitoring across their entire email portfolio of 50+ campaign types. What systematic optimization approach provides continuous improvement across all email programs?",
                options: [
                    "Focus optimization efforts on the highest-volume campaigns only",
                    "Implement systematic optimization framework with automated testing, performance monitoring, continuous improvement processes, and cross-campaign learning",
                    "Use manual optimization processes for each campaign independently",
                    "Apply the same optimization strategies to all campaigns regardless of type"
                ],
                correct: 1,
                explanation: "Correct Answer: B. Systematic optimization framework enables automated testing across all campaigns while performance monitoring identifies optimization opportunities. Continuous improvement processes ensure ongoing enhancement while cross-campaign learning applies successful strategies broadly. This comprehensive approach scales optimization across the entire email program. High-volume focus (A) misses optimization opportunities in other campaigns. Manual processes (C) don't scale across 50+ campaign types. Universal strategies (D) don't address campaign-specific requirements and opportunities."
            }
        ];

        let currentQuestion = 0;
        let userAnswers = [];
        let quizCompleted = false;

        // Topic mapping for performance tracking
        const topicMapping = {
            0: "Responsive Email Templates & HTML/CSS", 1: "Responsive Email Templates & HTML/CSS", 
            2: "Responsive Email Templates & HTML/CSS", 3: "Responsive Email Templates & HTML/CSS", 
            4: "Responsive Email Templates & HTML/CSS", 5: "Responsive Email Templates & HTML/CSS", 
            6: "Responsive Email Templates & HTML/CSS", 7: "AMPscript & Dynamic Personalization", 
            8: "AMPscript & Dynamic Personalization", 9: "AMPscript & Dynamic Personalization", 
            10: "AMPscript & Dynamic Personalization", 11: "AMPscript & Dynamic Personalization", 
            12: "AMPscript & Dynamic Personalization", 13: "AMPscript & Dynamic Personalization", 
            14: "A/B Testing & Optimization", 15: "A/B Testing & Optimization", 
            16: "A/B Testing & Optimization", 17: "A/B Testing & Optimization", 
            18: "A/B Testing & Optimization", 19: "A/B Testing & Optimization", 
            20: "Content Builder & Modular Design", 21: "Content Builder & Modular Design", 
            22: "Content Builder & Modular Design", 23: "Content Builder & Modular Design", 
            24: "Content Builder & Modular Design", 25: "Content Builder & Modular Design", 
            26: "Transactional Email Architecture", 27: "Transactional Email Architecture", 
            28: "Transactional Email Architecture", 29: "Transactional Email Architecture", 
            30: "Transactional Email Architecture", 31: "Multi-language & Localization", 
            32: "Multi-language & Localization", 33: "Multi-language & Localization", 
            34: "Multi-language & Localization", 35: "Email Tracking & Analytics", 
            36: "Email Tracking & Analytics", 37: "Email Tracking & Analytics", 
            38: "Email Tracking & Analytics", 39: "Advanced Email Features & Optimization"
        };

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function initializeQuiz() {
            userAnswers = new Array(questions.length).fill(null);
            displayQuestion();
            updateProgress();
            updateNavigationButtons();
        }

        function displayQuestion() {
            const quizContainer = document.getElementById('quiz-container');
            const question = questions[currentQuestion];
            
            const shuffledOptions = question.options.map((option, index) => ({
                text: option,
                originalIndex: index
            }));
            
            // Store the shuffled order for this question if not already stored
            if (!question.shuffledOrder) {
                question.shuffledOrder = shuffleArray([0, 1, 2, 3]);
            }
            
            const orderedOptions = question.shuffledOrder.map(index => ({
                text: question.options[index],
                originalIndex: index
            }));

            quizContainer.innerHTML = `
                <div class="question-card fade-in">
                    <div class="question-number">Question ${currentQuestion + 1} of ${questions.length}</div>
                    <div class="question-text">${question.question}</div>
                    <ul class="options">
                        ${orderedOptions.map((option, index) => `
                            <li class="option" onclick="selectAnswer(${option.originalIndex})" data-original="${option.originalIndex}">
                                ${String.fromCharCode(65 + index)}. ${option.text}
                            </li>
                        `).join('')}
                    </ul>
                    <div class="explanation" id="explanation-${currentQuestion}">
                        <h4>Explanation:</h4>
                        <p>${question.explanation}</p>
                    </div>
                </div>
            `;

            // Restore previous answer if exists
            if (userAnswers[currentQuestion] !== null) {
                showAnswer(userAnswers[currentQuestion]);
            }
        }

        function selectAnswer(answerIndex) {
            if (quizCompleted) return;
            
            userAnswers[currentQuestion] = answerIndex;
            showAnswer(answerIndex);
            updateNavigationButtons();
            
            // Show explanation after a short delay
            setTimeout(() => {
                document.getElementById(`explanation-${currentQuestion}`).classList.add('show');
            }, 500);
        }

        function showAnswer(selectedAnswer) {
            const options = document.querySelectorAll('.option');
            const question = questions[currentQuestion];
            
            options.forEach(option => {
                option.classList.add('disabled');
                const originalIndex = parseInt(option.dataset.original);
                
                if (originalIndex === question.correct) {
                    option.classList.add('correct');
                } else if (originalIndex === selectedAnswer && originalIndex !== question.correct) {
                    option.classList.add('incorrect');
                }
                
                if (originalIndex === selectedAnswer) {
                    option.classList.add('selected');
                }
            });

            // Update question card styling
            const questionCard = document.querySelector('.question-card');
            if (selectedAnswer === question.correct) {
                questionCard.classList.add('answered-correct');
            } else {
                questionCard.classList.add('answered-incorrect');
            }
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                displayQuestion();
                updateProgress();
                updateNavigationButtons();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                displayQuestion();
                updateProgress();
                updateNavigationButtons();
            }
        }

        function updateProgress() {
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            progressFill.style.width = progress + '%';
            progressText.textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const finishBtn = document.getElementById('finish-btn');
            
            prevBtn.disabled = currentQuestion === 0;
            
            if (currentQuestion === questions.length - 1) {
                nextBtn.style.display = 'none';
                finishBtn.style.display = 'inline-block';
                finishBtn.disabled = !allQuestionsAnswered();
            } else {
                nextBtn.style.display = 'inline-block';
                nextBtn.disabled = userAnswers[currentQuestion] === null;
                finishBtn.style.display = 'none';
            }
        }

        function allQuestionsAnswered() {
            return userAnswers.every(answer => answer !== null);
        }

        function finishQuiz() {
            if (!allQuestionsAnswered()) {
                alert('Please answer all questions before finishing the quiz.');
                return;
            }
            
            quizCompleted = true;
            showResults();
        }

        function showResults() {
            const quizContainer = document.getElementById('quiz-container');
            const controls = document.querySelector('.controls');
            const scoreContainer = document.getElementById('score-container');
            
            // Calculate results
            let correctAnswers = 0;
            const topicScores = {};
            
            questions.forEach((question, index) => {
                const topic = topicMapping[index];
                if (!topicScores[topic]) {
                    topicScores[topic] = { correct: 0, total: 0 };
                }
                topicScores[topic].total++;
                
                if (userAnswers[index] === question.correct) {
                    correctAnswers++;
                    topicScores[topic].correct++;
                }
            });
            
            const percentage = Math.round((correctAnswers / questions.length) * 100);
            
            // Update score display
            document.getElementById('final-percentage').textContent = `${percentage}%`;
            document.getElementById('score-details').textContent = 
                `You scored ${correctAnswers} out of ${questions.length} questions correctly`;
            
            // Create topic breakdown
            const topicBreakdown = document.getElementById('topic-breakdown');
            topicBreakdown.innerHTML = `
                <h3 style="color: #dc3545; margin-bottom: 20px; text-align: center;">Performance by Topic</h3>
                ${Object.entries(topicScores).map(([topic, scores]) => {
                    const topicPercentage = Math.round((scores.correct / scores.total) * 100);
                    return `
                        <div class="topic-item">
                            <div class="topic-name">${topic}</div>
                            <div class="topic-score">${scores.correct}/${scores.total} (${topicPercentage}%)</div>
                        </div>
                    `;
                }).join('')}
            `;
            
            // Hide quiz and controls, show results
            quizContainer.style.display = 'none';
            controls.style.display = 'none';
            scoreContainer.classList.add('show');
            
            // Show restart button
            document.getElementById('restart-btn').style.display = 'inline-block';
        }

        function restartQuiz() {
            currentQuestion = 0;
            userAnswers = new Array(questions.length).fill(null);
            quizCompleted = false;
            
            // Reset question shuffling
            questions.forEach(question => {
                delete question.shuffledOrder;
            });
            
            // Hide results and show quiz
            document.getElementById('score-container').classList.remove('show');
            document.getElementById('quiz-container').style.display = 'block';
            document.querySelector('.controls').style.display = 'block';
            document.getElementById('restart-btn').style.display = 'none';
            document.getElementById('next-btn').style.display = 'inline-block';
            document.getElementById('finish-btn').style.display = 'none';
            
            // Reinitialize quiz
            initializeQuiz();
        }

        // Initialize the quiz when the page loads
        window.onload = function() {
            initializeQuiz();
        };
    </script>
</body>
</html>